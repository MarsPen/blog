
### 问题
看你的简历上有关于组件库的，那能聊聊关于前端组件设计吗，你会考虑那些方面？

### 回答
关于组件设计的基本原则就是要考虑组件的复杂度。而复杂度主要来源是自身的状态和来自于外部的输入状态。在开发中保证将数据和UI解耦。并且要符合以下原则

- 单一职责-细粒度的考量
  - 保证组件的粒度，建立在可复用的基础上，不可复用的单一职责组件可以作为独立组建的内部组件。比如请求逻辑和渲染逻辑要分离。减少组件重新渲染

- 通用性-通用性的考量
  - 组件的DOM结构根据需求的不同是变化的,但是其行为(逻辑)是固定的,因此通用组件就是将 DOM 结构的控制权交给开发者,组件只负责行为和最基本的 DOM 结构

- 封装性
  - 通过 props来控制行为和输出，隐藏内部细节和实现意义，同时减少访问全局变量，可以通过props传递

- 组合型
  - 具有多个功能的组件应该转换为小组件，单一责任原则描述了如何将需求拆分为组件，封装描述了如何组织这些组件，组合描述了如何将整个系统粘合在一起

- 纯组件和非纯组件
  - 非纯组件有显示的副作用，我们要尽量隔离非纯代码
  - 将全局变量作为props传递给组件，而非将其注入到组件的作用域中
  - 将网络请求和组件渲染分离，只将数据传递给组件，保证组件职责的单一性，也能将非纯代码从组件中隔离、

- 可测试
  - 测试不仅仅是自动检测错误，更是检测组件的逻辑

- 清晰的文档和注释

- 设计组件时推荐使用 UML 类图，先将组件的结构、数据流动状态、处理函数整理好。然后构思组件细节，最后在写代码。
<img src="/assets/componment-des.jpg">

### 问题 
你是如何进行组件的技术选型？

### 回答

- CSS 库选择
  Antd 选择 less 作为 css 的预处理方案，Bootstrap 选择 Scss 不管哪种方案都需要额外引入 css，可以选择类似 material-ui 或者 tailwindcss 这样的基础库采用 css-in-js 不仅其他处理器的功能而且还能自动 JIT更加原子化，css 更小。

- JS 库选择
  对于 JS 来讲没有什么好说的直接上 Typescript
   

- 工程化方面
  - 打包工具就比较多了，看具体业务但是在类库开发上 rollup 会更适合一点。包括它的 tree shaking、scop hoisting、支持ESM书写一次输出多个格式等
  - 代码检测工具 Airbnb出品的 eslint-config-airbnb 就比较合适最大的特点结合 ts 比较严格。如果选择相对宽松的可以选择 eslint-config-standard
  - commit 规范 替代 commit 用 commitizen，校验 commit 可以选择 commitlint 然后结合 git hook  配合 Husky，自动生成 CHANGELOG可以选择standard-version

- 测试工具
  如果是小公司的抽离可以简单的做一下人工测试。但是如果用的人多的话。还是建议做一下比较标准的测试，因为基础库是作为被反复依赖的模块和较为稳定的需求。
  虽然需要花费一点时间，但是是有价值的。对许测试工具的选择 可以选择 Jest，不仅开箱即用，内置断言、测试覆盖率，而且特有的快照测试功能，通过对你UI代码可以生成快照文件

- 部署
  这方面选择的就比较对了可以选择 travis-ci或者 jenkens 都可以看个人选择

以上都是自己创建组件库，需要花费不小的时间，如果团队上认为成本过高的当然也可以fork成型的 UI 库然后进行二封

